' Gambas class file

Public state As FormState
Public onBreak As Boolean

Public Sub Form_Open()
  state = New FormState As "State"
  Timer1.Delay = 400
  Timer1.Enabled = True
  StatusBar.Text = "Welcome to PomoJrnl"
End

Public Sub State_completion()
  StatusBar.Text = "Pomodoro done!"
  CompletionForm.Show()
  LCDTotalCount.Text = state.total
End

Public Sub Timer1_Timer()
  LCDMinSec.Text = state.mmss()
End

Public Sub InterruptionBtn_Click()
  If state.paused
    state.unpause()
    InterruptionBtn.Background = -1
    StatusBar.Text = "Session resumed."
  Else
    state.pause()
    StatusBar.Text = "Session interupted."
  End If
End

Public Sub CancelBtn_Click()
  state.resetPom()
    StatusBar.Text = "Session cancelled."
End

Public Sub NewBtn_Click()
  state.startPom()
  StatusBar.Text = "Session in progress."
End

Public Sub QuitBtn_Click()
  Quit
End

Public Sub BreakBtn_Click()
  If onBreak
    state.stopBreak()
    onBreak = False
    StatusBar.Text = "Session resumed."
  Else
    state.startBreak()
    onBreak = True
    StatusBar.Text = "On break."
  End If
End
